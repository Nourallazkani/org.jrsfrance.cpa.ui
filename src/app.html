<template>
  <require from="/assets/css/common/common.css"></require>
  <require from="/assets/css/common/common-modal-dialog.css"></require>
  <require from="/assets/css/common/common-form.css"></require>
  <require from="/assets/css/common/common-grid.css"></require>
  <require from="/assets/css/common/common-saif.css"></require>
  <require from="/assets/css/specific/app.css"></require>
  
  <!-- sign-in-modal for refugees -->
  <div class="modal ${userDetails.profile=='R' && (authz.action=='sign-in' || authz.action=='recover-password') && !authz.silent ? 'modal-visible' : 'modal-hidden'}">
    <div class="modal-dialog">
      <div class="modal-dialog-header">
        <div if.bind="authz.action=='sign-in'">Connexion</div>
        <div if.bind="authz.action=='recover-password'">Réinitialisation du mot de passe</div>
        <div>
          <a click.trigger="cancelSignIn()" class="close"></a>
        </div>
      </div>
      <div class="modal-dialog-body" style="height:200px">
        <compose view="./views/_components/sign-in.html"></compose>
      </div>
      <div class="modal-dialog-footer"></div>
    </div>
  </div>
  <!-- end sign-in-modal for refugees-->

  <!-- sign-up-modal for refugees -->
  <div class="modal ${userDetails.profile=='R' && authz.action=='sign-up' ? 'modal-visible' : 'modal-hidden'}">
    <div class="modal-dialog">
      <div class="modal-dialog-header">
        <div>Inscription</div>
        <div>
          <a click.trigger="cancelSignUp()" class="close"></a>
        </div>
      </div>
      <div class="modal-dialog-body">
        <compose view="./views/_components/sign-up.html"></compose>
      </div>
      <div class="modal-dialog-footer"></div>
    </div>
  </div>
  <!-- end sign-in-modal-->  

  <!-- error modal -->
  <div class="modal ${error ? 'modal-visible' : 'modal-hidden'}">
    <div class="modal-dialog">
      <div class="modal-dialog-header">
        <div>Une erreur s'est produite</div>
        <div>
          <a click.trigger="error=null" class="close"></a>
        </div>
      </div>
      <div class="modal-dialog-body">
        Oops.
      </div>
      <div class="modal-dialog-footer"></div>
    </div>
  </div>
  <!-- end error modal -->

  <!-- header -->

  <header class="main-menu">
    <div class="languages">
      <a class="circle ${userDetails.language=='fr' ? 'active' : ''}" click.delegate="userDetails.language='fr'"> FR </a>
      <a class="circle ${userDetails.language=='en' ? 'active' : ''}"  click.delegate="userDetails.language='en'"> EN </a>
      <a class="circle ${userDetails.language=='ar' ? 'active' : ''}" click.delegate="userDetails.language='ar'"> ع </a>
      <a class="circle ${userDetails.language=='prs' ? 'active' : ''}" click.delegate="userDetails.language='prs'"> درى </a>
      x${error}y
    </div>

    <div class="logo">
      <a route-href="route: home"> <img style="width:100px; height:80px;" src="/assets/img/header/logo.svg" alt="Logo" title="Comprendre pour Apprendre" /> </a>
    </div>

    <div class="menu-items" if.bind="userDetails.account!=null">
      <p>Hello ${userDetails.account.name} </p>
      <a click.delegate="signOut()"> Deconnexion </a>
    </div>

    <div class="menu-items" if.bind="userDetails.account==null && userDetails.profile=='R'">
      <button click.delegate="startSignUp()">Inscription</button>
      <button click.delegate="startSignIn()"> Connexion </button>
    </div>
  </header>

  <router-view></router-view>
  
  <div class="footer">footer</div>
</template>