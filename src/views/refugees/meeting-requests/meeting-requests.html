<template>

    <div class="_results" if.bind="userDetails.account.profile!='R'" style="text-align:center">
        <p>${i18n("No access, please sign up or sign in")  & signal : 'language-change'}</p>
    </div>
    <div class="_results" if.bind="userDetails.account && userDetails.account.profile=='R'">


        <div class="offset-lg-15 " style="font-family:SegoeUiSlim;text-align:right">
            <a style="font-weight:bold" click.delegate="new()"> ${i18n("New appointment request")  & signal : 'language-change'}</a>
        </div>

        <hr style="margin:30px 0px" />



        <!-- results block -->

        <div class="_result" repeat.for="r of results" style="margin-bottom:70px">

            <!-- new block -->

            <div class="_edit-container" if.bind="r.action=='new'">
                <div style="text-align:right;padding-right:10px;padding-top:10px">
                    <a click.delegate="cancel()" class="close"></a>
                </div>

                <form class="split-lg-30-70 label-right" submit.delegate="save(r)" if.bind="r.action=='new'">
                    <fieldset>
                        <legend>${i18n("My request")  & signal : 'language-change'}</legend>
                        <div class="horizontal">
                            <label class="${r.errors.reason ? 'error' : ''}">${i18n("Request type *")  & signal : 'language-change'}</label>
                            <div class="horizontal  width-lg-70">
                                <div style="flex:1;margin-top:7px">
                                    <input type="radio" name="reason" checked.bind="r.item.reason" value="INTERPRETING">${i18n("Interpreting")  & signal : 'language-change'}
                                    <br/> (${refugee.languages.join(', ')})
                                </div>
                                <div style="flex:1;margin-top:7px">
                                    <input type="radio" name="reason" checked.bind="r.item.reason" value="SUPPORT_IN_STUDIES">${i18n("Support in studies")  & signal : 'language-change'}
                                    <br/> (${refugee.fieldOfStudy})
                                </div>
                                <div style="flex:1;margin-top:7px">
                                    <input type="radio" name="reason" checked.bind="r.item.reason" value.bind="CONVERSATION">${i18n("French lessons")  & signal : 'language-change'}
                                </div>
                            </div>
                        </div>
                        <div class="horizontal">
                            <label>${i18n("Additional information")  & signal : 'language-change'}</label>
                            <input type="text" value.bind="r.item.additionalInformations" />
                        </div>
                        <div class="horizontal">
                            <label>${i18n("Date")  & signal : 'language-change'} </label>
                            <input type="text" value.bind="r.item.dateConstraint" />
                        </div>
                        <div class="horizontal">
                            <label>${i18n("City or postal code")  & signal : 'language-change'}</label>
                            <input type="text" placeholder="" place-autocomplete="target.bind : r.item;target-property.bind:'refugeeLocation'" /><br/>
                        </div>

                    </fieldset>
                    <fieldset>
                        <legend>${i18n("To contact you")  & signal : 'language-change'}</legend>
                        <div class="horizontal">
                            <label>${i18n("Telephone")  & signal : 'language-change'}</label>
                            <input type="tel" value.bind="r.item.refugee.phoneNumber" /><br/>
                        </div>
                        <div class="horizontal">
                            <label>${i18n("Mail address")  & signal : 'language-change'}</label>
                            <input type="tel" value.bind="r.item.refugee.mailAddress" /><br/>
                        </div>
                        <div class="horizontal">
                            <button class="offset-lg-30">${i18n("Send my request")  & signal : 'language-change'}</button>
                        </div>
                    </fieldset>
                </form>
            </div>
            <!--new block -->



            <!-- result block -->
            <div class="width-lg-100 vertical" if.bind="!r.action">
                <div class="_result-header horizontal" if.bind="r.item.volunteer" rtl-right ltr-left>
                    <img src="/assets/img/common/icon-checked.svg" style="width:30px;height:30px;vertical-align:middle;">
                    <span style="padding-left:15px;padding-right:15px">
                        ${i18n("Accepted by")  & signal : 'language-change'} : ${r.item.volunteer.name} le ${r.item.acceptedDate | myDateFormat:'DD MMMM'}
                    </span>
                </div>
                <div class="_result-header horizontal" if.bind="!r.item.volunteer" rtl-right ltr-left>
                     ${i18n("Posted the")  & signal : 'language-change'} ${r.item.postDate | myDateFormat:'DD MMMM'}
                </div>                
                <div class="_result-body horizontal">

                    <div class="_image-container" style="background-image:url('/assets/img/saif/teaching.svg')">
                        <div if.bind="r.item.reason == 'INTERPRETING'">
                            <div class="fit-to-content">
                                 ${i18n("For")  & signal : 'language-change'} :  ${i18n("Interpreting")  & signal : 'language-change'} (${r.item.languages.join(' ou ')})
                            </div>
                        </div>
                        <div if.bind="r.item.reason == 'SUPPORT_IN_STUDIES'">
                            <div class="fit-to-content">
                                 ${i18n("For")  & signal : 'language-change'} :  ${i18n("Support in studies")  & signal : 'language-change'} (${r.item.fieldOfStudy})
                            </div>
                        </div>
                        <div if.bind="r.item.reason == 'CONVERSATION'">
                            <div class="fit-to-content">
                                 ${i18n("For")  & signal : 'language-change'} :  ${i18n("French lessons")  & signal : 'language-change'}
                            </div>                            
                        </div>
                    </div>

                    <div class="vertical _infos-container">

                        <img src="/assets/img/common/arrow-right-saif.svg" style="position:absolute; width:30px;height:30px; right:100%; bottom:25%;">
                        <div class="horizontal">
                            <div class="width-lg-40 info-title" left-or-right>
                                <img src="/assets/img/common/icon-date.svg" /> ${i18n("Date")  & signal : 'language-change'} :
                            </div>
                            <div class="width-lg-60 info-text">
                                ${r.item.dateConstraint}
                            </div>
                        </div>
                        <div class="horizontal">
                            <div class="width-lg-40 info-title" left-or-right>
                                <img src="/assets/img/common/icon-address.svg" /> ${i18n("Region")  & signal : 'language-change'} :
                            </div>
                            <div class="width-lg-60 info-text">
                                ${r.item.refugeeLocation}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="_result-body">
                    <div style="background-color:#e7e9e8;padding:5px;box-sizing: border-box;" class="width-lg-100">
                        ${i18n("Additional information")  & signal : 'language-change'} : ${r.item.additionalInformations}
                    </div>
                </div>
            </div>

        </div>
    </div>
     <br/>
</template>